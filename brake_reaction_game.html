<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãƒ–ãƒ¬ãƒ¼ã‚­åå¿œã‚²ãƒ¼ãƒ </title>
  <style>
    body { font-family: 'Meiryo', sans-serif; background: #f0f2f5; text-align: center; }
    .container { background: #fff; border-radius: 12px; box-shadow: 0 2px 8px #b0c4de; max-width: 420px; margin: 40px auto; padding: 2.5em; }
    .scene { font-size: 2em; color: #e74c3c; font-weight: bold; margin: 2em 0; min-height: 2em; }
    .info { font-size: 1.1em; color: #444; margin-bottom: 1.5em; }
    .score { font-size: 1.5em; color: #2574c7; margin-top: 1em; font-weight: bold; }
    .miss { font-size: 1.2em; color: #e74c3c; margin-top: 0.5em; font-weight: bold; }
    .final-comment { font-size: 1.2em; margin-top: 1em; color: #2574c7; font-weight: bold; }
    .start-btn, .restart-btn, .brake-btn { background: #1a73e8; color: #fff; border: none; border-radius: 10px; padding: 1.2em 2.5em; margin: 1em; font-size: 1.3em; cursor: pointer; letter-spacing: 0.1em; }
    .start-btn:hover, .restart-btn:hover, .brake-btn:hover { background: #1557b0; }
    .brake-btn:disabled { background: #aaa; cursor: not-allowed; }
  </style>
</head>
<body>
  <div class="container">
    <div style="font-size:1.5em; color:#2574c7; font-weight:bold; margin-bottom:0.5em;">ãƒ–ãƒ¬ãƒ¼ã‚­åå¿œã‚²ãƒ¼ãƒ </div>
    <div class="info">ã€Œæ­¢ã¾ã‚Œã€ã‚„éšœå®³ç‰©ãŒå‡ºãŸã‚‰ã€ã§ãã‚‹ã ã‘æ—©ãã€Œãƒ–ãƒ¬ãƒ¼ã‚­ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ï¼ˆ10å›è¨ˆæ¸¬ï¼‰</div>
    <div class="scene" id="scene"></div>
    <div class="score" id="score" style="display:none;"></div>
    <div class="miss" id="miss" style="display:none;"></div>
    <div class="final-comment" id="comment" style="display:none;"></div>
    <button id="startBtn" class="start-btn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
    <button id="restartBtn" class="restart-btn" style="display:none;">ã‚‚ã†ä¸€åº¦</button>
    <button id="brakeBtn" class="brake-btn" style="display:none;">ãƒ–ãƒ¬ãƒ¼ã‚­</button>
  </div>
  <script>
    const scenes = [
      { text: 'ğŸ›‘ æ­¢ã¾ã‚Œï¼', type: 'stop' },
      { text: 'ğŸš§ éšœå®³ç‰©ï¼', type: 'obstacle' },
      { text: 'ğŸ‘¦ å­ã©ã‚‚é£›ã³å‡ºã—ï¼', type: 'child' },
      { text: 'ğŸš¦ èµ¤ä¿¡å·ï¼', type: 'red' }
    ];
    let trial = 0, maxTrial = 10, times = [], miss = 0, waiting = false, timer = null, startTime = 0;
    const sceneDiv = document.getElementById('scene');
    const scoreDiv = document.getElementById('score');
    const missDiv = document.getElementById('miss');
    const commentDiv = document.getElementById('comment');
    const startBtn = document.getElementById('startBtn');
    const restartBtn = document.getElementById('restartBtn');
    const brakeBtn = document.getElementById('brakeBtn');
    function startGame() {
      trial = 0; times = []; miss = 0;
      scoreDiv.style.display = 'none';
      missDiv.style.display = 'none';
      commentDiv.style.display = 'none';
      startBtn.style.display = 'none';
      restartBtn.style.display = 'none';
      brakeBtn.style.display = 'none';
      nextTrial();
    }
    function nextTrial() {
      sceneDiv.textContent = '';
      brakeBtn.style.display = 'none';
      waiting = true;
      // ãƒ©ãƒ³ãƒ€ãƒ ãªå¾…ã¡æ™‚é–“ï¼ˆ1.2ï½2.5ç§’ï¼‰
      const wait = 1200 + Math.random()*1300;
      timer = setTimeout(() => {
        const scene = scenes[Math.floor(Math.random()*scenes.length)];
        sceneDiv.textContent = scene.text;
        brakeBtn.disabled = false;
        brakeBtn.style.display = 'inline-block';
        startTime = Date.now();
        waiting = false;
      }, wait);
    }
    brakeBtn.onclick = () => {
      if(waiting) {
        // æ—©æŠ¼ã—ãƒŸã‚¹
        miss++;
        clearTimeout(timer);
        sceneDiv.textContent = 'ã¾ã å‡ºã¦ã„ã¾ã›ã‚“ï¼';
        brakeBtn.disabled = true;
        setTimeout(nextTrial, 900);
        return;
      }
      const reaction = Date.now() - startTime;
      times.push(reaction);
      sceneDiv.textContent = `åå¿œæ™‚é–“ï¼š${reaction} ms`;
      brakeBtn.disabled = true;
      setTimeout(() => {
        trial++;
        if(trial < maxTrial) nextTrial();
        else endGame();
      }, 900);
    };
    function endGame() {
      sceneDiv.textContent = '';
      brakeBtn.style.display = 'none';
      startBtn.style.display = 'none';
      restartBtn.style.display = 'inline-block';
      const avg = times.length ? Math.round(times.reduce((a,b)=>a+b,0)/times.length) : 0;
      scoreDiv.textContent = `å¹³å‡åå¿œæ™‚é–“ï¼š${avg} ms`;
      missDiv.innerHTML = `<span class='miss'>æ—©æŠ¼ã—ãƒŸã‚¹ï¼š${miss}</span>`;
      let comment = '';
      if(avg < 400 && miss === 0) comment = 'ç´ æ™´ã‚‰ã—ã„åå¿œé€Ÿåº¦ã§ã™ï¼å®‰å…¨é‹è»¢ã‚’å¿ƒãŒã‘ã¾ã—ã‚‡ã†ã€‚';
      else if(avg < 600) comment = 'ã‚ˆãã§ãã¾ã—ãŸï¼ã“ã®èª¿å­ã§ãŒã‚“ã°ã‚Šã¾ã—ã‚‡ã†ã€‚';
      else comment = 'è½ã¡ç€ã„ã¦ç¢ºå®Ÿã«åå¿œã—ã¾ã—ã‚‡ã†ã€‚';
      scoreDiv.style.display = 'block';
      missDiv.style.display = 'block';
      commentDiv.textContent = comment;
      commentDiv.style.display = 'block';
    }
    startBtn.onclick = startGame;
    restartBtn.onclick = startGame;
  </script>
</body>
</html> 